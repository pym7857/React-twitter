(window.webpackJsonp=window.webpackJsonp||[]).push([["ce6e"],{RNiq:function(e,t,n){"use strict";n.r(t);var a=n("ln6h"),c=n.n(a),r=n("O40h"),l=n("q1tI"),i=n.n(l),u=n("/MKj"),o=n("doui"),s=n("Vl3Y"),d=n("5rEg"),p=n("2/Rp"),f=n("p+NB"),m=function(){var e=Object(l.useState)(""),t=Object(o.default)(e,2),n=t[0],a=t[1],c=Object(u.b)(),r=Object(u.c)(function(e){return e.post}),m=r.imagePaths,b=r.isAddingPost,h=r.postAdded,E=Object(l.useRef)();Object(l.useEffect)(function(){a("")},[!0===h]);var g=Object(l.useCallback)(function(e){if(e.preventDefault(),!n||!n.trim())return alert("내용을 입력해주세요!");var t=new FormData;m.forEach(function(e){t.append("image",e)}),t.append("content",n),c({type:f.e,data:t})},[n,m]),v=Object(l.useCallback)(function(e){a(e.target.value)},[]),w=Object(l.useCallback)(function(e){console.log(e.target.files);var t=new FormData;[].forEach.call(e.target.files,function(e){t.append("image",e)}),c({type:f.J,data:t})},[]),j=Object(l.useCallback)(function(){E.current.click()},[E.current]),y=Object(l.useCallback)(function(e){return function(){c({type:f.y,index:e})}},[]);return i.a.createElement(s.a,{style:{margin:"10px 0 20px"},encType:"multipart/form-data",onSubmit:g},i.a.createElement(d.a.TextArea,{maxLength:140,placeholder:"어떤 신기한 일이 있었나요?",value:n,onChange:v}),i.a.createElement("div",null,i.a.createElement("input",{type:"file",multiple:!0,hidden:!0,ref:E,onChange:w}),i.a.createElement(p.a,{onClick:j},"이미지 업로드"),i.a.createElement(p.a,{type:"primary",style:{float:"right"},htmlType:"submit",loading:b},"짹짹")),i.a.createElement("div",null,m.map(function(e,t){return i.a.createElement("div",{key:e,style:{display:"inline-block"}},i.a.createElement("img",{src:"http://localhost:3067/".concat(e),style:{width:"200px"},alt:e}),i.a.createElement("div",null,i.a.createElement(p.a,{onClick:y(t)},"제거")))})))},b=n("uor+"),h=function(){var e=Object(u.c)(function(e){return e.user}).me,t=Object(u.c)(function(e){return e.post}),n=t.mainPosts,a=t.hasMorePost,c=Object(u.b)(),r=Object(l.useRef)([]),o=Object(l.useCallback)(function(){if(window.scrollY+document.documentElement.clientHeight+300>document.documentElement.scrollHeight&&a){var e=n[n.length-1].id;r.current.includes(e)||c({type:f.q,lastId:e}),r.current.push(e)}},[a,n.length]);return Object(l.useEffect)(function(){return window.addEventListener("scroll",o),function(){window.removeEventListener("scroll",o)}},[n.length]),i.a.createElement("div",null,e&&i.a.createElement(m,null),n.map(function(e){return i.a.createElement(b.a,{key:e.id,post:e})}))};h.getInitialProps=function(){var e=Object(r.default)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.store.dispatch({type:f.q});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();t.default=h},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){var e=n("RNiq");return{page:e.default||e}}])}},[["vlRD","5d41","9da1"]]]);